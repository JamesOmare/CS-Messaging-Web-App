{% extends 'base.html' %}


{% block head %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.0/flowbite.min.css" rel="stylesheet" />  

  <style>
    
    main#dashboard-main::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    main#dashboard-main::-webkit-scrollbar-thumb {
      border-radius: 9999px;
      background-color: rgb(156 163 175 / 0.75);
    }
    main#dashboard-main::-webkit-scrollbar-track {
      box-shadow: inset 0 0 5px rgb(156 163 175 / 0.75);
      border-radius: 10px;
    }
    
  </style>

{% endblock head %}
  


{% block title %}
<span class="text-center">Branch Support Agent: {{ current_user.user_name }}</span>
{% endblock title %}



{% block content %}

  
  
  <div class="bg-slate-200 flex h-screen">
    <aside class="fixed z-50 md:relative">

      <!-- Sidebar -->
      <input type="checkbox" class="peer hidden" id="sidebar-open" />
      <label class="peer-checked:rounded-full peer-checked:p-2 peer-checked:right-6 peer-checked:bg-gray-600 peer-checked:text-white absolute top-8 z-20 mx-4 cursor-pointer md:hidden" for="sidebar-open">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </label>
      <nav aria-label="Sidebar Navigation" class="peer-checked:w-64 left-0 z-10 flex h-screen w-0 flex-col overflow-hidden bg-gray-700 text-white transition-all md:h-screen md:w-64 lg:w-72">
        <div class="bg-slate-800 mt-5 py-4 pl-10 md:mt-10">
          <span class="">
            <span class="mr-1 inline-flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 align-bottom text-2xl font-bold">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
              </svg>
              
            </span>
            <span class="text-xl">Welcome {{ current_user.user_name | title }}</span>
          </span>
        </div>
        <ul class="mt-8 space-y-3 md:mt-20">
          <li class="relative">
            <button onclick="scrollToSection('section1')"  class="focus:bg-slate-600 focus:text-white hover:bg-slate-600 flex w-full space-x-2 rounded-md px-10 py-4 text-gray-300 focus:outline-none focus:font-semibold">
              <span
                ><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg></span
              ><span class="">Overview</span>
            </button>
          </li>
         
          <li class="relative">
            <button onclick="scrollToSection('section2')" class="focus:bg-slate-600 focus:text-white hover:bg-slate-600 flex w-full space-x-2 rounded-md px-10 py-4 text-gray-300 focus:outline-none focus:font-semibold">
              <!-- Container for the SVG and red dot -->
              <div class="relative">
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="w-6 h-6" viewBox="0 0 16 16">
                    <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                    <path d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z"/>
                  </svg>
                </span>
              </div>
              
              <span class="">Pending Messages</span>
            </button>
          </li>
          
          
          
          <li class="relative">
            <button onclick="scrollToSection('section3')"  class="focus:bg-slate-600 focus:text-white hover:bg-slate-600 flex w-full space-x-2 rounded-md px-10 py-4 text-gray-300 focus:font-semibold focus:outline-none">
              <span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="h-6 w-6" viewBox="0 0 16 16">
                    <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM4.5 5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7zm0 2.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7zm0 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4z"/>
                  </svg> 
                </span>
                <span class="">Answered Messages</span>
            </button>
          
          </li>
        
        
        </ul>
      </nav>
    </aside>
    <!-- /Sidebar -->
  
    <div class="flex h-full w-full flex-col">
      <!-- Navbar -->
      <header class="relative flex flex-col items-center bg-white px-4 py-4 shadow sm:flex-row md:h-20">
        <div class="mx-auto mt-2 mb-2 w-screen max-w-screen-md p-10 leading-6"> 
          <form method="GET" class="relative mx-auto flex w-full max-w-2xl items-center justify-between rounded-md border shadow-lg"> 
            <svg class="absolute left-2 block h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8" class=""></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65" class=""></line>
            </svg>
            <input type="name" name="search_query"  class="h-14 w-full rounded-md py-4 pr-40 pl-12 outline-none focus:ring-2" placeholder="Search Here :" />
            <button type="submit" class="absolute right-0 mr-1 inline-flex h-12 items-center justify-center rounded-lg bg-gray-900 px-10 font-medium text-white focus:ring-4 hover:bg-gray-700">Search</button>
          </form>
        </div>
      </header>
      <!-- /Navbar -->
  
      <!-- Main -->
      <div class="h-full overflow-hidden pl-10">
        <main id="dashboard-main" class="h-[calc(100vh-10rem)] overflow-auto px-4 py-10">
          {% if search_query %}
          <div class="m-auto mt-2 w-fit px-8 py-6 bg-green-400 text-white flex justify-between rounded" id="success_popup">
            <div class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-6" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
              </svg>
                <p>Showing {{ pending_messages.total + resolved_messages.total }} results of the search "{{ search_query }}"</p>
            </div>
            <button class="closebtn text-white-200 hover:text-black rounded-full bg-green-600 mx-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
          </div>
            
          {% endif %}
          <!-- Put your content inside of the <main/> tag -->
          <p class="mb-6 text-black text-2xl font-bold">Here's an overview of your recent activities:</p>
          <div class="flex flex-wrap gap-x-4 gap-y-8">
          
            <!-- Overview Section -->
            <div id="section1" class="h-auto w-full rounded-xl bg-white p-10 shadow-md">
              <div class="w-auto">
                <div class="mx-auto flex p-4 justify-between items-center space-evenly">

                  <div class="max-w-md rounded-lg border px-6 pt-6 pb-10 text-lg">
                    <div class="inline-block rounded-full border-8 border-blue-50 bg-blue-200 p-2 text-blue-500">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z" />
                      </svg>
                      
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" class="float-right h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                    <p class="text-sm font-medium text-gray-500">Assigned Queries</p>
                    <p class="text-4xl font-medium text-gray-800">{{ current_user.messages_allocated }}</p>
                    
                  </div>
              
                  <div class="max-w-md rounded-lg border px-6 pt-6 pb-10 text-lg">
                    <div class="inline-block rounded-full border-8 border-emerald-50 bg-emerald-200 p-2 text-emerald-500">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                      </svg>
                      
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" class="float-right h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                    <p class="text-sm font-medium text-gray-500">Queries Answered</p>
                    <p class="text-4xl font-medium text-gray-800">{{ current_user.messages_resolved }}</p>
                    
                  </div>
              
                  <div class="max-w-md rounded-lg border px-6 pt-6 pb-10 text-lg">
                    <div class="inline-block rounded-full border-8 border-red-50 bg-red-200 p-2 text-red-500">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                      </svg>
                      
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" class="float-right h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                    <p class="text-sm font-medium text-gray-500">Queries Unanswered</p>
                    {% set messages_unresolved = current_user.messages_allocated - current_user.messages_resolved %}
                    <p class="text-4xl font-medium text-gray-800">{{ messages_unresolved }}</p>
                  </div>

                  <div class="max-w-md rounded-lg border px-6 pt-6 pb-10 text-lg">
                    <div class="inline-block rounded-full border-8 border-yellow-50 bg-yellow-200 p-2 text-yellow-500">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
                      </svg>
                      
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" class="float-right h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                
                    <p class="text-sm font-medium text-gray-500">Completion Percentage</p>
                    {% if current_user.messages_resolved %}
                      {% set completion_percentage =  ((current_user.messages_resolved) /(current_user.messages_allocated) * 100)  %}
                      <p class="text-4xl font-medium text-gray-800">{{ "{:,.2f}".format(completion_percentage) }}%</p>
                    {% else %}
                    <p class="text-4xl font-medium text-gray-800">0%</p>

                    {% endif %}
                    
                    
                  </div>


                </div>
              </div>
              
            </div>

            
            <!-- Pending Messages Section -->
            <div id="section2" class="h-auto w-full rounded-xl bg-white p-10 shadow-md">
              <p class="mb-6 text-black text-2xl font-bold">Pending Messages Section:</p>
              
              {% if pending_messages %}
              
              {% for message in pending_messages %}
                  
                <div class="m-5">
                  <div class="group mx-2 mt-10 grid max-w-screen-md grid-cols-12 space-x-8 overflow-hidden rounded-lg border py-8 text-gray-700 shadow transition hover:shadow-lg sm:mx-auto">
                    <a href="#" class="order-2 col-span-1 mt-4 -ml-14 text-left text-gray-600 hover:text-gray-700 sm:-order-1 sm:ml-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-[4rem] h-10  rounded-xl-3" viewBox="0 0 16 16">
                          <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/>
                        </svg>
                    </a>
                    <div class="col-span-11 flex flex-col pr-8 text-left sm:pl-4">
                      <div class="flex">

                        <span class="mb-3 overflow-hidden pr-7 text-lg font-semibold sm:text-xl"> Message priotity - #{{ loop.index }} </span>

                        {% if message.priority == 1 %}
                          {% set priority = "Loan Application" %}

                        {% elif message.priority == 2  %}
                          {% set priority = "Payment Enquiries" %}
                            
                        {% elif message.priority == 3  %}
                          {% set priority = "Interest Rate and Terms" %}

                        {% elif message.priority == 4  %}
                          {% set priority = "Account and Personal Information Update" %}

                        {% else %}
                          {% set priority = "General" %}

                        {% endif %}
                        
                        <div class="text-sm">Label:<span class="ml-2 mr-3 text-sm rounded-full bg-teal-100 px-2 py-0.5 text-teal-900">{{ priority }}</span></div>
                        
                      
                      </div>
                      <p class="overflow-hidden bg-gray-200 rounded-lg  p-10 text-sm">{{ message.text_query }}.</p>
                      
              
                      <div class="mt-5 flex flex-col space-y-3 text-sm font-medium text-gray-500 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-2">
                        <div class="">Time Submitted:<span class="ml-2 mr-3 rounded-full bg-green-100 px-2 py-0.5 text-green-900"> {{  moment(message.created_at).fromNow(refresh=True) }} </span></div>
                        <div class="">Status:<span class="ml-2 mr-3 rounded-full bg-red-100 px-2 py-0.5 text-red-900">{{ message.status }}</span></div>

                        <!-- View Profile -->
                        <button data-modal-target="modal{{message.id}}" data-modal-toggle="modal{{message.id}}" class="text-white py-2 px-4 rounded bg-indigo-500 hover:bg-indigo-600 flex items-center shadow hover:shadow-lg font-medium transition transform hover:-translate-y-0.5">
                          View Profile
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-4" fill="currentColor" viewBox="0 0 16 16">
                          <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
                        </svg>
                        </button>

                        <!-- Reply To Query -->
                        <button data-modal-target="modal_{{message.id}}" data-modal-toggle="modal_{{message.id}}" class="inline-flex items-center justify-center space-x-2 border border-transparent text-sm font-medium rounded-full w-12 h-12 text-white bg-green-600 hover:bg-green-700 transition transform hover:-translate-y-0.5">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                            <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                          </svg>
                        </button>
                        
                        

                      </div>
                    </div>
                  </div>
                </div>


                <!-- Customer Profile modal -->
                <div id="modal{{message.id}}" tabindex="-1" aria-hidden="true" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
                  <div class="relative w-full max-w-2xl max-h-full">
                      <!-- Modal content -->
                      <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                          <!-- Modal header -->
                          <div class="flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600">
                              <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="modal{{message.id}}">
                                  <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                                  </svg>
                                  <span class="sr-only">Close modal</span>
                              </button>
                          </div>
                          <!-- Modal body -->
                          <div class="p-6 space-y-6">
                              <div class="bg-white max-w-2xl shadow overflow-hidden sm:rounded-lg">
                                <div class="px-4 py-5 sm:px-6">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">
                                        Client Profile Details
                                    </h3>
                                </div>
                                <div class="border-t border-gray-200">
                                    <dl>
                                        <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                            <dt class="text-sm font-medium text-gray-500">
                                              Client Name
                                            </dt>
                                            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                                {{ message.user.user_name }}
                                            </dd>
                                        </div>
                                        <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                          <dt class="text-sm font-medium text-gray-500">
                                              Client Email
                                          </dt>
                                          <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                              {{ message.user.user_email }}
                                          </dd>
                                      </div>
                                      <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-sm font-medium text-gray-500">
                                            Client Phone Number
                                        </dt>
                                        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                            {{ message.user.phone_number }}
                                        </dd>
                                      </div>
                                        <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                            <dt class="text-sm font-medium text-gray-500">
                                              Client Queries Submitted
                                            </dt>
                                            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                              {{ message.user.messages_sent }}
                                            </dd>
                                        </div>
                                        
                                    </dl>
                                </div>
                            </div>
                          </div>

                          <!-- Add a new div to hold the toast message -->
                          <div id="toast-container" class="absolute z-50 top-0 right-0 mt-4 mr-4"></div>
                          <!-- Modal footer -->
                          <div class="flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600">
                              <button data-modal-hide="modal{{message.id}}" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Close</button>
                          </div>
                      </div>
                  </div>
                </div>

                <!-- Reply modal -->
                <div id="modal_{{message.id}}" tabindex="-1" aria-hidden="true" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
                  <div class="relative w-full max-w-md max-h-full">
                      <!-- Modal content -->
                      <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                          <button type="button" class="absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="modal_{{message.id}}">
                              <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                              </svg>
                              <span class="sr-only">Close modal</span>
                          </button>
                          <div class="px-6 py-6 lg:px-8">
                              <h3 class="text-gray-900 dark:text-white text-xl md:text-xl font-extrabold mb-2">Reply To Query</h3>
                              <form class="space-y-6" action="{{ url_for('main.reply_to_message') }}" method="POST">
                                  <div>
                                      <label for="content" class="block mb-2 text-sm bg-gray-200 p-5 rounded-md font-medium text-gray-900 dark:text-white">{{ message.text_query }}</label>
                                  </div>
                                                        

                                  <div class="w-full mb-4 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                                    <div class="flex items-center justify-between px-3 py-2 border-b dark:border-gray-600">
                                      
                                        <button type="button" data-tooltip-target="tooltip-fullscreen" class="p-2 text-gray-500 rounded cursor-pointer sm:ml-auto hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="currentColor" class="bi bi-vector-pen" viewBox="0 0 16 16">
                                              <path fill-rule="evenodd" d="M10.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-1.902 1.902-.829 3.313a1.5 1.5 0 0 1-1.024 1.073L1.254 14.746 4.358 4.4A1.5 1.5 0 0 1 5.43 3.377l3.313-.828L10.646.646zm-1.8 2.908-3.173.793a.5.5 0 0 0-.358.342l-2.57 8.565 8.567-2.57a.5.5 0 0 0 .34-.357l.794-3.174-3.6-3.6z"/>
                                              <path fill-rule="evenodd" d="M2.832 13.228 8 9a1 1 0 1 0-1-1l-4.228 5.168-.026.086.086-.026z"/>
                                            </svg>
                                            <span class="sr-only">Full screen</span>
                                        </button>
                                        <div id="tooltip-fullscreen" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
                                            Type Reply
                                            <div class="tooltip-arrow" data-popper-arrow></div>
                                        </div>
                                    </div>
                                    <div class="px-4 py-2 bg-white rounded-b-lg dark:bg-gray-800">
                                        <label for="content" class="sr-only">Publish post</label>
                                        <textarea id="content" name="text_reply" rows="8" class="block w-full px-0 text-sm text-gray-800 bg-white border-0 dark:bg-gray-800 focus:ring-0 dark:text-white dark:placeholder-gray-400" placeholder="Write a Reply..." required></textarea>
                                    </div>
                                </div>

                                <!-- Hidden input to store the selected option -->
                                <input type="hidden" name="message_id" id="selected_option" value="{{ message.id }}">

                                <!-- Hidden input to store the user_id -->
                                <input type="hidden" name="agent_id" value="{{ current_user.id }}">


                                <button type="submit" class="group flex cursor-pointer items-center  bg-blue-700 rounded-lg focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-900 hover:bg-blue-800 bg-none px-8 py-4 text-center font-semibold leading-tight text-white">
                                  Reply
                                  <svg class="group-hover:ml-8 ml-4 transition-all" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.912 12H4L2.023 4.135A.662.662 0 0 1 2 3.995c-.022-.721.772-1.221 1.46-.891L22 12L3.46 20.896c-.68.327-1.464-.159-1.46-.867a.66.66 0 0 1 .033-.186L3.5 15" /></svg>
                                </button>
                                
                              </form>
                          </div>
                      </div>
                  </div>
                </div> 
  
              {% endfor %}

              <!-- Pagination Description for Pending Messages -->
              <div class="text-center mb-2">
                <div class="items-center space-x-2 text-xs">
                    <button class="py-2 px-4 bg-white text-gray-600 font-medium rounded hover:bg-gray-100 active:bg-gray-200 disabled:opacity-50 inline-flex items-center">
                        {{ pending_messages.total }} messages in total
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <p class="text-gray-500 mt-4 lg:mt-0">Showing Page {{ pending_messages.page }} of {{ pending_messages.pages }} entries</p>
                </div>
              </div>

              <!-- Pagination Start for Pending Messages -->
              <div class="flex justify-center mb-20">
                <nav class="bg-gray-200 rounded-full px-4 py-2">
                    <ul class="flex text-gray-600 gap-4 font-medium py-2">
                        <li>
                            <a href="{{ url_for('main.agent_support_page', page_pending=1) }}" class="">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                </svg>
                            </a>
                        </li>
                        {% for page_number in pending_messages.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
                            {% if page_number %}
                                {% if pending_messages.page == page_number %}
                                    <li>
                                        <a href="{{ url_for('main.agent_support_page', page_pending=page_number) }}" class="rounded-full px-4 py-2 bg-white text-gray-600">{{ page_number }}</a>
                                    </li>
                                {% else %}
                                    <li>
                                        <a href="{{ url_for('main.agent_support_page', page_pending=page_number) }}" class="rounded-full px-4 py-2 hover-bg-white hover:text-gray-600 transition duration-300 ease-in-out">{{ page_number }}</a>
                                    </li>
                                {% endif %}
                            {% else %}
                                <li>
                                    <span class="px-4 py-2">...</span>
                                </li>
                            {% endif %}
                        {% endfor %}
                        <li>
                            <a href="{{ url_for('main.agent_support_page', page_pending=pending_messages.pages) }}" class="">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </a>
                        </li>
                    </ul>
                </nav>
              </div>
              <!-- Pagination End for Pending Messages -->

              {% else %}
              <div class="bg-gray-100 py-10">
                <div class="mx-auto flex w-72 flex-col items-center rounded-3xl border-4 bg-white px-6 py-8 text-center">
                  <div class="mb-6 text-5xl text-blue-600">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="1em" height="1em">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.143 17.082a24.248 24.248 0 003.844.148m-3.844-.148a23.856 23.856 0 01-5.455-1.31 8.964 8.964 0 002.3-5.542m3.155 6.852a3 3 0 005.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 003.536-1.003A8.967 8.967 0 0118 9.75V9A6 6 0 006.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53" />
                    </svg>
                    
                  </div>
                  <p class="mb-2 text-xl font-medium text-gray-600">No Pending Messages</p>
                  <p class="text-gray-500">You Have No Pending Messages.</p>
                </div>
              </div>
              
              {% endif %}

            </div>
            <!-- End -->
            
            <!-- Resolved Messages Section -->
            <div id="section3" class="h-auto w-full rounded-xl bg-white p-10 shadow-md">
              <p class="mb-6 text-black text-2xl font-bold">Resolved Messages Section:</p>
              
              {% if resolved_messages %}
              {% for message in resolved_messages  %}
                  
              <div class="m-5">
                <div class="group mx-2 mt-10 grid max-w-screen-md grid-cols-12 space-x-8 overflow-hidden rounded-lg border py-8 text-gray-700 shadow transition hover:shadow-lg sm:mx-auto">
                  <a href="#" class="order-2 col-span-1 mt-4 -ml-14 text-left text-gray-600 hover:text-gray-700 sm:-order-1 sm:ml-4">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-[4rem] h-10  rounded-xl-3" viewBox="0 0 16 16">
                        <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/>
                      </svg>
                  </a>
                  <div class="col-span-11 flex flex-col pr-8 text-left sm:pl-4">
                    <div class="flex">
                      <span class="mb-3 overflow-hidden pr-7 text-lg font-semibold sm:text-xl"> Message #{{ loop.index }} </span>
                      {% if message.priority == 1 %}
                        {% set priority = "Loan Application" %}

                      {% elif message.priority == 2  %}
                        {% set priority = "Payment Enquiries" %}
                          
                      {% elif message.priority == 3  %}
                        {% set priority = "Interest Rate and Terms" %}

                      {% elif message.priority == 4  %}
                        {% set priority = "Account and Personal Information Update" %}

                      {% else %}
                        {% set priority = "General" %}

                      {% endif %}
                      
                      <div class="text-sm">Label:<span class="ml-2 mr-3 text-sm rounded-full bg-teal-100 px-2 py-0.5 text-teal-900">{{ priority }}</span></div>
                      
                     
                    </div>
                    <p class="overflow-hidden bg-gray-200 rounded-lg  p-10 text-sm">{{ message.text_query }}.</p>
                    
            
                    <div class="mt-5 flex flex-col space-y-3 text-sm font-medium text-gray-500 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-2">
                      <div class="">Time Submitted:<span class="ml-2 mr-3 rounded-full bg-green-100 px-2 py-0.5 text-green-900"> {{  moment(message.created_at).fromNow(refresh=True) }} </span></div>
                      <div class="">Status:<span class="ml-2 mr-3 rounded-full bg-blue-100 px-2 py-0.5 text-blue-900">{{ message.status }}</span></div>

                      <!-- View Profile -->
                      <button data-modal-target="modal{{message.id}}" data-modal-toggle="modal{{message.id}}" class="text-white py-2 px-4 rounded bg-indigo-500 hover:bg-indigo-600 flex items-center shadow hover:shadow-lg font-medium transition transform hover:-translate-y-0.5">
                        View Profile
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-4" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
                      </svg>
                      </button>

                    </div>
                  </div>
                </div>
              </div>

              

              <!-- Customer Profile modal -->
              <div id="modal{{message.id}}" tabindex="-1" aria-hidden="true" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
                <div class="relative w-full max-w-2xl max-h-full">
                    <!-- Modal content -->
                    <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                        <!-- Modal header -->
                        <div class="flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600">
                            <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="modal{{message.id}}">
                                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                                </svg>
                                <span class="sr-only">Close modal</span>
                            </button>
                        </div>
                        <!-- Modal body -->
                        <div class="p-6 space-y-6">
                            <div class="bg-white max-w-2xl shadow overflow-hidden sm:rounded-lg">
                              <div class="px-4 py-5 sm:px-6">
                                  <h3 class="text-lg leading-6 font-medium text-gray-900">
                                      Client Profile Details
                                  </h3>
                              </div>
                              <div class="border-t border-gray-200">
                                  <dl>
                                      <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                          <dt class="text-sm font-medium text-gray-500">
                                            Client Name
                                          </dt>
                                          <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                              {{ message.user.user_name }}
                                          </dd>
                                      </div>
                                      <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-sm font-medium text-gray-500">
                                            Client Email
                                        </dt>
                                        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                            {{ message.user.user_email }}
                                        </dd>
                                    </div>
                                    <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                      <dt class="text-sm font-medium text-gray-500">
                                          Client Phone Number
                                      </dt>
                                      <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                          {{ message.user.phone_number }}
                                      </dd>
                                    </div>
                                      <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                          <dt class="text-sm font-medium text-gray-500">
                                            Client Queries Submitted
                                          </dt>
                                          <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                            {{ message.user.messages_sent }}
                                          </dd>
                                      </div>
                                      
                                  </dl>
                              </div>
                          </div>
                        </div>

                        <!-- Add a new div to hold the toast message -->
                        <div id="toast-container" class="absolute z-50 top-0 right-0 mt-4 mr-4"></div>
                        <!-- Modal footer -->
                        <div class="flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600">
                            <button data-modal-hide="modal{{message.id}}" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Close</button>
                        </div>
                    </div>
                </div>
              </div>

              <!-- Reply modal -->
              <div id="modal_{{message.id}}" tabindex="-1" aria-hidden="true" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
                <div class="relative w-full max-w-md max-h-full">
                    <!-- Modal content -->
                    <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                        <button type="button" class="absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="modal_{{message.id}}">
                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                            </svg>
                            <span class="sr-only">Close modal</span>
                        </button>
                        <div class="px-6 py-6 lg:px-8">
                            <h3 class="text-gray-900 dark:text-white text-xl md:text-xl font-extrabold mb-2">Reply To Query</h3>
                            <form class="space-y-6" action="{{ url_for('main.reply_to_message') }}" method="POST">
                                <div>
                                    <label for="content" class="block mb-2 text-sm bg-gray-200 p-5 rounded-md font-medium text-gray-900 dark:text-white">{{ message.text_query }}</label>
                                </div>
                                                      

                                <div class="w-full mb-4 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                                  <div class="flex items-center justify-between px-3 py-2 border-b dark:border-gray-600">
                                     
                                      <button type="button" data-tooltip-target="tooltip-fullscreen" class="p-2 text-gray-500 rounded cursor-pointer sm:ml-auto hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600">
                                           <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="currentColor" class="bi bi-vector-pen" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M10.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-1.902 1.902-.829 3.313a1.5 1.5 0 0 1-1.024 1.073L1.254 14.746 4.358 4.4A1.5 1.5 0 0 1 5.43 3.377l3.313-.828L10.646.646zm-1.8 2.908-3.173.793a.5.5 0 0 0-.358.342l-2.57 8.565 8.567-2.57a.5.5 0 0 0 .34-.357l.794-3.174-3.6-3.6z"/>
                                            <path fill-rule="evenodd" d="M2.832 13.228 8 9a1 1 0 1 0-1-1l-4.228 5.168-.026.086.086-.026z"/>
                                          </svg>
                                          <span class="sr-only">Full screen</span>
                                      </button>
                                      <div id="tooltip-fullscreen" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
                                          Type Reply
                                          <div class="tooltip-arrow" data-popper-arrow></div>
                                      </div>
                                  </div>
                                  <div class="px-4 py-2 bg-white rounded-b-lg dark:bg-gray-800">
                                      <label for="content" class="sr-only">Publish post</label>
                                      <textarea id="content" name="text_reply" rows="8" class="block w-full px-0 text-sm text-gray-800 bg-white border-0 dark:bg-gray-800 focus:ring-0 dark:text-white dark:placeholder-gray-400" placeholder="Write a Reply..." required></textarea>
                                  </div>
                              </div>

                              <!-- Hidden input to store the selected option -->
                              <input type="hidden" name="message_id" id="selected_option" value="{{ message.id }}">

                              <!-- Hidden input to store the user_id -->
                              <input type="hidden" name="agent_id" value="{{ current_user.id }}">


                              <button type="submit" class="group flex cursor-pointer items-center  bg-blue-700 rounded-lg focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-900 hover:bg-blue-800 bg-none px-8 py-4 text-center font-semibold leading-tight text-white">
                                Reply
                                <svg class="group-hover:ml-8 ml-4 transition-all" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.912 12H4L2.023 4.135A.662.662 0 0 1 2 3.995c-.022-.721.772-1.221 1.46-.891L22 12L3.46 20.896c-.68.327-1.464-.159-1.46-.867a.66.66 0 0 1 .033-.186L3.5 15" /></svg>
                              </button>
                              
                            </form>
                        </div>
                    </div>
                </div>
              </div> 
  
              {% endfor %}
              <!-- Pagination Description for Resolved Messages -->
              <div class="text-center mb-2">
                  <div class="items-center space-x-2 text-xs">
                      <button class="py-2 px-4 bg-white text-gray-600 font-medium rounded hover:bg-gray-100 active:bg-gray-200 disabled:opacity-50 inline-flex items-center">
                          {{ resolved_messages.total }} messages in total
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                              <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                          </svg>
                      </button>
                      <p class="text-gray-500 mt-4 lg:mt-0">Showing Page {{ resolved_messages.page }} of {{ resolved_messages.pages }} entries</p>
                  </div>
              </div>
              <!-- Pagination Start for Resolved Messages -->
              <div class="flex justify-center mb-20">
                  <nav class="bg-gray-200 rounded-full px-4 py-2">
                      <ul class="flex text-gray-600 gap-4 font-medium py-2">
                          <li>
                              <a href="{{ url_for('main.agent_support_page', page_resolved=1) }}" class="">
                                  <svg xmlns="http://w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                  </svg>
                              </a>
                          </li>
                          {% for page_number in resolved_messages.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
                              {% if page_number %}
                                  {% if resolved_messages.page == page_number %}
                                      <li>
                                          <a href="{{ url_for('main.agent_support_page', page_resolved=page_number) }}" class="rounded-full px-4 py-2 bg-white text-gray-600">{{ page_number }}</a>
                                      </li>
                                  {% else %}
                                      <li>
                                          <a href="{{ url_for('main.agent_support_page', page_resolved=page_number) }}" class="rounded-full px-4 py-2 hover-bg-white hover-text-gray-600 transition duration-300 ease-in-out">{{ page_number }}</a>
                                      </li>
                                  {% endif %}
                              {% else %}
                                  <li>
                                      <span class="px-4 py-2">...</span>
                                  </li>
                              {% endif %}
                          {% endfor %}
                          <li>
                              <a href="{{ url_for('main.agent_support_page', page_resolved=resolved_messages.pages) }}" class="">
                                  <svg xmlns="http://w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                  </svg>
                              </a>
                          </li>
                      </ul>
                  </nav>
              </div>
              <!-- Pagination End for Resolved Messages -->


  
              {% else %}
              <div class="bg-gray-100 py-10">
                <div class="mx-auto flex w-72 flex-col items-center rounded-3xl border-4 bg-white px-6 py-8 text-center">
                  <div class="mb-6 text-5xl text-blue-600">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="1em" height="1em">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.143 17.082a24.248 24.248 0 003.844.148m-3.844-.148a23.856 23.856 0 01-5.455-1.31 8.964 8.964 0 002.3-5.542m3.155 6.852a3 3 0 005.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 003.536-1.003A8.967 8.967 0 0118 9.75V9A6 6 0 006.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53" />
                    </svg>
                    
                  </div>
                  <p class="mb-2 text-xl font-medium text-gray-600">No Resolved Messages</p>
                  <p class="text-gray-500">You Have No Resolved Messages.</p>
                </div>
              </div>
              
              {% endif %}

            </div>

          </div>
        </main>
      </div>
      <!-- /Main -->
    </div>
  </div>

{% endblock content %}
  

{% block script %}

<script>

    function scrollToSection(sectionId, offset = 10) {
        const section = document.getElementById(sectionId);
        const mainContent = document.getElementById("dashboard-main");
        
        if (section && mainContent) {
            // Calculate the scroll position with an offset from the top
            const offsetTop = section.offsetTop - mainContent.offsetTop - offset;
            
            // Scroll smoothly to the section within the main content area
            mainContent.scrollTo({ top: offsetTop, behavior: "smooth" });
        }
        
    }
  
  </script>

{% endblock script %}